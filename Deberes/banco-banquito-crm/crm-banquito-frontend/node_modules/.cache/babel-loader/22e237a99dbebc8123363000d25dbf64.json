{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/esteban/Documents/ESPE/Octavo Semestre/Arquitectura de Software/crm-banquito-frontend-project/crm-banquito-frontend-git/crm-banquito-frontend/src/Product/ProductTable.js\";\nimport React from \"react\";\nimport ReactDatatable from '@ashvin27/react-datatable';\nimport { initial, orderBy } from 'lodash';\nimport * as Constants from '../constants';\nimport EditProductModal from \"./EditProductModal\";\nimport CustomAlert from '../CustomComponents/CustomAlert';\nimport DeleteDialog from '../CustomComponents/DeleteDialog';\n\nclass ProductTable extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.editRecord = (record, index) => {\n      this.setState({\n        product: record,\n        modalShow: true\n      });\n      this.setState({\n        variant: \"success\",\n        alertTitle: \"Actualización exitosa!\",\n        alertBody: \"El producto se ha actualizado exitosamente!\",\n        id: record.idCampaign\n      });\n      console.log(this.state.id);\n    };\n\n    this.deleteRecord = (record, index) => {\n      this.setState({\n        product: record,\n        showDelete: true,\n        deleteTitle: \"Elminicaión de un Producto\",\n        deleteBody: \"¿Está seguro que desea eliminar el producto '\" + record.name + \"'?\"\n      });\n    };\n\n    this.deleteRegistry = r => {\n      fetch(Constants.PRODUCT_URL + r.id, {\n        method: 'DELETE'\n      }).then(result => {\n        result.text();\n      }).then(response => {\n        console.log('registry ' + r.id + ' deleted');\n        this.props.getProducts();\n      });\n    };\n\n    this.handleInputChange = e => {\n      console.log(e);\n      let change = {};\n      change = this.state.product;\n      change[e.target.name] = e.target.value;\n      this.setState({\n        product: change\n      });\n    };\n\n    this.handleStartDateChange = e => {\n      console.log(e);\n      let change = {};\n      change = this.state.product;\n      change[\"startDate\"] = e.toISOString();\n      this.setState({\n        product: change\n      });\n    };\n\n    this.handleEndDateChange = e => {\n      console.log(e);\n      let change = {};\n      change = this.state.product;\n      change[\"endDate\"] = e.toISOString();\n      this.setState({\n        product: change\n      });\n    };\n\n    this.getCampaigns = () => {\n      fetch(Constants.CAMPAIGN_URL).then(response => {\n        return response.json();\n      }).then(data => {\n        const options = data.map(d => ({\n          \"value\": d.id,\n          \"label\": d.name\n        }));\n        console.log(options);\n        this.setState({\n          campaigns: [{\n            \"value\": 0,\n            \"label\": \"Ninguna\"\n          }].concat(options)\n        });\n      });\n    };\n\n    this.handleChange = e => {\n      console.log('change');\n      this.setState({\n        id: e.value,\n        name: e.label\n      });\n    };\n\n    this.onSort = (column, records, sortOrder) => {\n      return orderBy(records, [column], [sortOrder]);\n    };\n\n    this.columns = [{\n      key: \"id\",\n      text: \"ID\",\n      className: \"id\",\n      sortable: true,\n      width: 0\n    }, {\n      key: \"name\",\n      text: \"Nombre\",\n      sortable: true\n    }, {\n      key: \"type\",\n      text: \"Tipo\",\n      className: \"type\",\n      sortable: true\n    }, {\n      key: \"description\",\n      text: \"Descripción\",\n      className: \"description\",\n      sortable: true\n    }, {\n      key: \"quantity\",\n      text: \"Cantidad\",\n      className: \"quantity\",\n      sortable: true\n    }, {\n      key: \"interest\",\n      text: \"Interes\",\n      className: \"interest\",\n      sortable: true\n    }, {\n      key: \"status\",\n      text: \"Estado\",\n      className: \"status\",\n      sortable: true\n    }, {\n      key: \"startDate\",\n      text: \"F. Inicio\",\n      className: \"startDate\",\n      sortable: true\n    }, {\n      key: \"endDate\",\n      text: \"F. Fin\",\n      className: \"endDate\",\n      sortable: true\n    }, {\n      key: \"idCampaign\",\n      text: \"ID Campaña\",\n      className: \"id_campaign\",\n      sortable: true\n    }, {\n      key: \"action\",\n      text: \"Action\",\n      cell: (record, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-sm\",\n            onClick: this.editRecord.bind(this, record, index),\n            style: {\n              marginRight: '5px'\n            },\n            children: \"Editar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger btn-sm\",\n            onClick: this.deleteRecord.bind(this, record, index),\n            children: \"Eliminar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this);\n      }\n    }];\n    this.config = {\n      page_size: 10,\n      length_menu: [10, 20, 50],\n      show_filter: true,\n      show_pagination: true,\n      filename: \"products\",\n      language: {\n        length_menu: \"Mostrar _MENU_ registros por página\",\n        filter: \"Buscar en registros ...\",\n        info: \"Mostrando _START_ a _END_ de _TOTAL_ entradas\",\n        pagination: {\n          first: \"Primero\",\n          previous: \"Previa\",\n          next: \"próximo\",\n          last: \"Última\"\n        }\n      }\n    };\n    this.state = {\n      modalShow: false,\n      product: {},\n      variant: \"\",\n      alertBody: \"\",\n      alertTitle: \"\",\n      deleteBody: \"\",\n      deleteTitle: \"\",\n      showAlert: false,\n      showDelete: false,\n      campaigns: [],\n      id: 0,\n      name: \"\"\n    };\n  }\n\n  // getClients() {\n  //     fetch(Constants.GET_CLIENTS).then((response) => {\n  //         return response.json();\n  //     }).then(data => {\n  //         this.setState({records: data});\n  //     })\n  // }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CustomAlert, {\n        show: this.state.showAlert,\n        onClose: () => {\n          this.setState({\n            showAlert: false\n          });\n        },\n        variant: this.state.variant,\n        messageTitle: this.state.alertTitle,\n        messageBody: this.state.alertBody,\n        dismissible: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(DeleteDialog, {\n          showDelete: this.state.showDelete,\n          hideDelete: () => {\n            this.setState({\n              showDelete: false\n            });\n          },\n          deleteTitle: this.state.deleteTitle,\n          deleteBody: this.state.deleteBody,\n          deleteRegistry: this.deleteRegistry,\n          record: this.state.product\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ReactDatatable, {\n        config: this.config,\n        records: this.props.records,\n        columns: this.columns,\n        onSort: this.onSort\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(EditProductModal, {\n        onShows: () => this.setState({\n          showAlert: true\n        }),\n        handleInputChange: this.handleInputChange.bind(this),\n        handleStartDateChange: this.handleStartDateChange.bind(this),\n        handleEndDateChange: this.handleEndDateChange.bind(this),\n        show: this.state.modalShow,\n        product: this.state.product,\n        onHide: () => {\n          this.setState({\n            modalShow: false\n          });\n          this.props.getProducts();\n        },\n        getProducts: this.props.getProducts,\n        handleChange: this.handleChange.bind(this),\n        campaigns: this.state.campaigns,\n        getCampaigns: this.getCampaigns.bind(this),\n        currentId: this.state.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this);\n  } // componentDidMount() {\n  //     this.getProducts()\n  // }\n\n\n}\n\nexport default ProductTable;","map":{"version":3,"sources":["/home/esteban/Documents/ESPE/Octavo Semestre/Arquitectura de Software/crm-banquito-frontend-project/crm-banquito-frontend-git/crm-banquito-frontend/src/Product/ProductTable.js"],"names":["React","ReactDatatable","initial","orderBy","Constants","EditProductModal","CustomAlert","DeleteDialog","ProductTable","Component","constructor","props","editRecord","record","index","setState","product","modalShow","variant","alertTitle","alertBody","id","idCampaign","console","log","state","deleteRecord","showDelete","deleteTitle","deleteBody","name","deleteRegistry","r","fetch","PRODUCT_URL","method","then","result","text","response","getProducts","handleInputChange","e","change","target","value","handleStartDateChange","toISOString","handleEndDateChange","getCampaigns","CAMPAIGN_URL","json","data","options","map","d","campaigns","concat","handleChange","label","onSort","column","records","sortOrder","columns","key","className","sortable","width","cell","bind","marginRight","config","page_size","length_menu","show_filter","show_pagination","filename","language","filter","info","pagination","first","previous","next","last","showAlert","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDatatable from '@ashvin27/react-datatable';\nimport { initial, orderBy } from 'lodash';\nimport * as Constants from '../constants';\nimport EditProductModal from \"./EditProductModal\";\nimport CustomAlert from '../CustomComponents/CustomAlert';\nimport DeleteDialog from '../CustomComponents/DeleteDialog';\n\nclass ProductTable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.columns = [\n            {\n                key: \"id\",\n                text: \"ID\",\n                className: \"id\",\n                sortable: true,\n                width: 0\n            },\n            {\n                key: \"name\",\n                text: \"Nombre\",\n                sortable: true\n            },\n            {\n                key: \"type\",\n                text: \"Tipo\",\n                className: \"type\",\n                sortable: true\n            },\n            {\n                key: \"description\",\n                text: \"Descripción\",\n                className: \"description\",\n                sortable: true\n            },\n            {\n                key: \"quantity\",\n                text: \"Cantidad\",\n                className: \"quantity\",\n                sortable: true\n            },\n            {\n                key: \"interest\",\n                text: \"Interes\",\n                className: \"interest\",\n                sortable: true\n            },\n            {\n                key: \"status\",\n                text: \"Estado\",\n                className: \"status\",\n                sortable: true\n            },\n            {\n                key: \"startDate\",\n                text: \"F. Inicio\",\n                className: \"startDate\",\n                sortable: true\n            },\n            {\n                key: \"endDate\",\n                text: \"F. Fin\",\n                className: \"endDate\",\n                sortable: true\n            },\n            {\n                key: \"idCampaign\",\n                text: \"ID Campaña\",\n                className: \"id_campaign\",\n                sortable: true\n            },\n            {\n                key: \"action\",\n                text: \"Action\",\n                cell: (record, index) => {\n                    return (\n                        <div>\n                            <button\n                                className=\"btn btn-primary btn-sm\"\n                                onClick={this.editRecord.bind(this, record, index)}\n                                style={{marginRight: '5px'}}>\n                                    Editar\n                            </button>\n                            <button \n                                className=\"btn btn-danger btn-sm\" \n                                onClick={this.deleteRecord.bind(this, record, index)}>\n                                    Eliminar\n                            </button>\n                        </div>\n                    );\n                }\n            }\n        ];\n        this.config = {\n            page_size: 10,\n            length_menu: [10, 20, 50],\n            show_filter: true,\n            show_pagination: true,\n            filename: \"products\",\n            language: {\n                length_menu: \"Mostrar _MENU_ registros por página\",\n                filter: \"Buscar en registros ...\",\n                info: \"Mostrando _START_ a _END_ de _TOTAL_ entradas\",\n                pagination: {\n                    first: \"Primero\",\n                    previous: \"Previa\",\n                    next: \"próximo\",\n                    last: \"Última\"\n                }\n            }\n        }\n        this.state = {\n            modalShow: false,\n            product: {},\n            variant: \"\",\n            alertBody: \"\",\n            alertTitle: \"\",\n            deleteBody: \"\",\n            deleteTitle: \"\",\n            showAlert: false,\n            showDelete: false,\n            campaigns: [],\n            id: 0,\n            name: \"\"\n        }\n    }\n    \n    editRecord = (record, index) => {\n        this.setState({product: record, modalShow: true});\n        this.setState({\n            variant: \"success\",\n            alertTitle: \"Actualización exitosa!\",\n            alertBody: \"El producto se ha actualizado exitosamente!\",\n            id: record.idCampaign\n        });\n        console.log(this.state.id)\n    }\n    \n    deleteRecord = (record, index) => {\n        this.setState({\n            product: record,\n            showDelete: true,\n            deleteTitle: \"Elminicaión de un Producto\",\n            deleteBody: \"¿Está seguro que desea eliminar el producto '\"+record.name+\"'?\"\n        })\n    }\n\n    deleteRegistry = r => {\n        fetch(Constants.PRODUCT_URL+r.id, {\n            method: 'DELETE'\n        }).then(result => {\n            result.text();\n        }).then(response => {\n            console.log('registry '+ r.id +' deleted')\n            this.props.getProducts();\n        })\n    }\n\n    handleInputChange = e => {\n        console.log(e)\n        let change = {}\n        change = this.state.product\n        change[e.target.name] = e.target.value\n        this.setState({\n            product: change\n        })\n    }\n\n    handleStartDateChange = e => {\n        console.log(e)\n        let change = {}\n        change = this.state.product\n        change[\"startDate\"] = e.toISOString()\n        this.setState({\n            product: change\n        })\n    }\n\n    handleEndDateChange = e => {\n        console.log(e)\n        let change = {}\n        change = this.state.product\n        change[\"endDate\"] = e.toISOString()\n        this.setState({\n            product: change\n        })\n    }\n\n    getCampaigns = () => {\n        fetch(Constants.CAMPAIGN_URL).then((response) => {\n            return response.json();\n        }).then(data => {\n            const options = data.map(d => ({\n                \"value\" : d.id,\n                \"label\" : d.name\n          \n            }))\n            console.log(options)\n            this.setState({campaigns: [{\"value\": 0, \"label\": \"Ninguna\"}].concat(options)});\n            \n        })\n    }\n\n    handleChange = e => {\n        console.log('change')\n        this.setState({\n            id: e.value,\n            name: e.label\n        })\n    } \n    \n    onSort = (column, records, sortOrder) => {\n        return orderBy(records, [column], [sortOrder]);\n    }\n    \n    // getClients() {\n    //     fetch(Constants.GET_CLIENTS).then((response) => {\n    //         return response.json();\n    //     }).then(data => {\n    //         this.setState({records: data});\n    //     })\n    // }\n    \n    render() {\n        \n        return (\n            <div>\n                <CustomAlert \n                    show={this.state.showAlert}\n                    onClose={() => {this.setState({showAlert: false})}}\n                    variant={this.state.variant}\n                    messageTitle={this.state.alertTitle}\n                    messageBody={this.state.alertBody} \n                    dismissible\n                />\n                <div className=\"container\">\n                    <DeleteDialog \n                        showDelete={this.state.showDelete}\n                        hideDelete={() => {this.setState({showDelete: false})}}\n                        deleteTitle={this.state.deleteTitle}\n                        deleteBody={this.state.deleteBody}\n                        deleteRegistry={this.deleteRegistry}\n                        record={this.state.product}\n                    />\n                </div>\n                <ReactDatatable\n                    config={this.config}\n                    records={this.props.records}\n                    columns={this.columns}\n                    onSort={this.onSort}\n                    \n                />\n                <EditProductModal \n                    onShows={() => this.setState({showAlert: true})}\n                    handleInputChange={this.handleInputChange.bind(this)} \n                    handleStartDateChange={this.handleStartDateChange.bind(this)} \n                    handleEndDateChange={this.handleEndDateChange.bind(this)}\n                    show={this.state.modalShow} \n                    product={this.state.product} \n                    onHide={() => {this.setState({modalShow: false}); this.props.getProducts()}} \n                    getProducts={this.props.getProducts}\n                    handleChange={this.handleChange.bind(this)}\n                    campaigns={this.state.campaigns}\n                    getCampaigns={this.getCampaigns.bind(this)}\n                    currentId={this.state.id}\n                />\n            </div>\n        );\n    }\n\n    // componentDidMount() {\n    //     this.getProducts()\n    // }\n}\n\nexport default ProductTable;"]},"metadata":{},"sourceType":"module"}